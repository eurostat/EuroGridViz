<!DOCTYPE html>
<html lang="en" style="height:100%;">

<head>
    <title></title>
</head>

<body style="margin: 0; height:100%; font-family: Arial, Helvetica, sans-serif;">
    <canvas id="vacanvas" style="height:100%; width:100%;"></canvas>

    <div style="display: block; float: right; z-index: 3; position: absolute; left: 20px; top: 20px;">
        <select id="type">
            <option value="flag" selected>Flag</option>
            <option value="piechart">Pie chart</option>
            <option value="ring">Ring</option>
        </select>
    </div>

    <script src="../build/gridvizc.js"></script>
    <script>

        //make application
        const app = gviz.App()
            .setGeoCenter({ x: 4000000, y: 2260000 }).setZoomFactor(100)//.setBackgroundColor("black")

        const col = gviz.color().interpolateRdYlBu;
        const s = gviz.CompositionStyle(
            {
                "Ind_0_3": col(0),
                "Ind_4_5": col(4 / 80),
                "Ind_6_10": col(6 / 80),
                "Ind_11_17": col(11 / 80),
                "Ind_18_24": col(18 / 80),
                "Ind_25_39": col(25 / 80),
                "Ind_40_54": col(40 / 80),
                "Ind_55_64": col(55 / 80),
                "Ind_65_79": col(65 / 80),
                "Ind_80p": col(1),
                "Ind_inc": "gray"
            },
            c => "flag",
            { val: c => 8 * Math.pow(c["Ind"], 0.5), unit: "geo" }
        ).setZFStroke(5);


        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/200m//", [s], 0, 20);
        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/400m//", [s], 20, 40);
        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/1000m//", [s], 40, 100);
        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/2000m//", [s], 100, 200);
        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/5000m//", [s], 200, 500);
        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/10000m//", [s], 500, 1000);
        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/20000m//", [s], 1000, 2000);
        app.addTiledGrid("https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/France/filosofi_2015/50000m//", [s], 2000, 9999999999);

        //combo list
        const select = document.querySelector('#type');
        select.addEventListener('change', function () {
            //change style type
            s.type(c => select.value)
            //redraw
            app.cg.redraw();
        });

    </script>

</body>

</html>