<!DOCTYPE html>
<html lang="en" style="height:100%;">

<head>
    <title></title>
</head>

<body style="margin: 0; height:100%; font-family: Arial, Helvetica, sans-serif; overflow: hidden;">
    <canvas id="vacanvas" style="height:100%; width:100%;"></canvas>

    <div
        style="position: absolute; left: 20px; top: 20px; width: auto; height: auto; padding: 10px; border: 0px; border-radius: 5px; background: #FFFFFFCC; line-height: 1.6; box-shadow: 5px 5px 5px grey">
        <span style="font-size: 17pt; font-weight: bold;">Statistical grids - Croatia</span><br><span
            style="font-size: 10pt;">
            <hr>
            <input type="checkbox" id="label" checked>
            <label for="label">City names</label>
            <input type="checkbox" id="boundary" checked>
            <label for="boundary">Boundaries</label>
            <hr>Source: Croatian Bureau of Statistics, 2015, <a href="https://podaci.dzs.hr/media/selhhzke/metod_74.pdf"
                target="_blank" rel="noopener noreferrer">URL</a>
        </span>
    </div>

    <script src="../build/gridvizc.js"></script>
    <script>

        //make application
        const app = new gviz.App()
            .setGeoCenter({ x: 4785299, y: 2540380 }).setZoomFactor(100).setZoomFactorExtent([10, 1500])
            .setLabelLayer(gviz.getEuronymeLabelLayer("HR", "20")).setBoundaryLayer(gviz.getEurostatBoundariesLayer())

        //test view from URL parameters, if any
        app.cg.setViewFromURL()


        //style
        const sPopulationTotal = new gviz.ShapeColorSizeStyle({
            colorCol: "TOTAL",
            color: (v, r, s) => gviz.interpolateOrRd(gviz.s(v / s.max, 0.25)),
            shape: () => "square",
            zfStroke: 80,
        }).addLegend({ color: { id: "schgvvgolleggcend", bottom: "20px", left: "20px", title: "Number of inhabitants", ticks: 6, colorRamp: gviz.interpolateOrRd, fun: (t, r, s) => s.max * Math.pow(t, 1 / 0.25) } })

        const sPopulationAge = new gviz.CompositionStyle({
            color: getColorDict(),
            type: () => "flag",
            sizeCol: "TOTAL",
            size: (v, r, s, zf) => r * gviz.s(v / s.max, 0.1, 0),
            agePyramidHeight: (r) => 0.95 * r
        }).addLegend(getLegendOpts())


        const ttfun = c => ""
        const url = "https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/Croatia/";

        app.addCSVGridLayer(url + "Population_2011_Grid_1000m.csv", 1000, [sPopulationTotal], 0, 9999999999,
            {
                preprocess: c => {
                    //parse position
                    //IDENTIFIER: "1kmN2621E4812"
                    let d = (c.IDENTIFIER + "").replace("1kmN", "").split("E")
                    c.y = (+d[0]) * 1000
                    c.x = (+d[1]) * 1000
                    delete c.IDENTIFIER
                    c.TOTAL = c.TOTAL === "D" ? 0 : +c.TOTAL
                    //TOTAL,WOMEN,MEN,
                    //TOTAL_0_14,WOMEN_0_14,MEN_0_14,TOTAL_15_64,WOMEN_15_64,MEN_15_64_,TOTAL_65p,WOMEN_65p,MEN_65p,
                    //INACTIVE_POPULATION,LABOUR_FORCE,
                    //BASIC_EDUCATION_OR_LESS,UPPER_SECONDARY_EDUCATION,TERTIARY_EDUCATION
                }
            })



        // show/hide labels
        document.querySelector('#label').addEventListener('change', function () {
            app.showLabels = this.checked
            app.cg.redraw();
        });

        // show/hide boundaries
        document.querySelector('#boundary').addEventListener('change', function () {
            app.showBoundaries = this.checked
            app.cg.redraw();
        });

    </script>

    <div
        style="position: absolute; right: 0px; bottom: 0px; width: auto; height: auto; padding: 1px; border: 0px; background: #FFFFFFCC;">
        <span style="font-size: 8pt;"><a href="https://github.com/eurostat/gridviz"
                style="text-decoration:none">GridViz</a> |
            Â© <a href="https://eurogeographics.org" style="text-decoration:none">EuroGeographics</a></span>
    </div>

</body>

</html>