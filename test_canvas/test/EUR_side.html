<!DOCTYPE html>
<html lang="en" style="height:100%;">

<head>
    <title></title>
</head>

<body style="margin: 0; height:100%; font-family: Arial, Helvetica, sans-serif; overflow: hidden;">
    <canvas id="vacanvas" style="height:100%; width:100%;"></canvas>
    <script src="../build/gridvizc.js"></script>
    <script>

        //make application
        const app = new gviz.App()
            .setGeoCenter({ x: 4000000, y: 2960000 }).setZoomFactor(600).setZoomFactorExtent([40, 7500])
            .setLabelLayer(gviz.getEuronymeLabelLayer()).setBoundaryLayer(gviz.getEurostatBoundariesLayer())

        //define datasets, styles and layers
        const s = new gviz.SideStyle({
            value: (c1, c2) => Math.abs(c2["2018"] - c2["2018"]),
            color: (side, r, s, z) => "darkgray",
            width: (side, r, s, z) => 0.6 * r * Math.pow(side.value / s.max, 1)
        })

        const preprocess = c => { }
        const cellInfoHTML = c => {
            if (isNaN(c.r)) return ""
            if (!c.r) return "No change"
            if (c.r === Infinity) return "No population in 2011, <b>" + c["2018"] + "</b> in 2018"
            return "<b>" + (+c["2018"] > +c["2011"] ? "+" : "") + Math.floor(c.r * 1000) / 10 + "%</b> inhabitant(s)"
        }
        const url = "https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/Europe/grid_pop_tiled/"
        app.addTiledGridLayer(url + "1km/", [s], 0, 100, { cellInfoHTML: cellInfoHTML, preprocess: preprocess });
        app.addTiledGridLayer(url + "2km/", [s], 100, 200, { cellInfoHTML: cellInfoHTML, preprocess: preprocess });
        app.addTiledGridLayer(url + "5km/", [s], 200, 500, { cellInfoHTML: cellInfoHTML, preprocess: preprocess });
        app.addTiledGridLayer(url + "10km/", [s], 500, 1000, { cellInfoHTML: cellInfoHTML, preprocess: preprocess });
        app.addTiledGridLayer(url + "20km/", [s], 1000, 9999999999, { cellInfoHTML: cellInfoHTML, preprocess: preprocess });

    </script>

    <div
        style="position: absolute; right: 0px; bottom: 0px; width: auto; height: auto; padding: 1px; border: 0px; background: #FFFFFFCC;">
        <span style="font-size: 8pt;"><a href="https://github.com/eurostat/gridviz"
                style="text-decoration:none">GridViz</a> |
            Â© <a href="https://eurogeographics.org" style="text-decoration:none">EuroGeographics</a></span>
    </div>

</body>

</html>