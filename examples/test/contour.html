<!DOCTYPE html>
<html lang="en" style="height:100%;">

<head>
    <meta name="viewport" content="maximum-scale=1.0, user-scalable=no" />
    <title>Gridviz</title>
</head>

<body style="margin: 0; height:100%; font-family: Arial, Helvetica, sans-serif; overflow: hidden;">
    <div id="viz-container" style="height:100%; width:100%;"></div>

    <script src="../../build/gridviz.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-color@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-interpolate@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-scale-chromatic@3"></script>
    <script>

        let containerDiv = document.getElementById("viz-container");

        //const breaks = [5, 10, 15, 20, 25, 30, 35, 40, 50, 60, 90]
        const breaks = [20, 40, 60, 90]

        const app = new gviz.App(containerDiv)
            //set position and zoom
            .setGeoCenter({ x: 3426953, y: 2326791 }).setZoomFactor(1000)
            //.setGeoCenter({ x: 4500000, y: 2900000 }).setZoomFactor(4000)

            .addMultiScaleTiledCSVGridLayer(
                [1000, 2000, 5000, 10000, 20000, 50000, 100000],
                r => "https://raw.githubusercontent.com/eurostat/gridviz/master/assets/csv/Europe/accessibility/tiled/" + r + "m/",
                [
                    new gviz.ContourStyle({
                        valueCol: "avg_time_nearest_h",
                        breaks: breaks,
                    }),

                    /*
                                        new gviz.SquareColorWGLStyle({
                                            colorCol: "avg_time_nearest_h",
                                            color: d3.interpolateSpectral,
                                            tFun: (v, r, s) => {
                                                if (v === "NA") return
                                                let i = 0
                                                for (let b of breaks) {
                                                    if (+v <= b) break;
                                                    i++
                                                }
                                                return gviz.sPow(1 - (i - 1) / breaks.length, 2)
                                            },
                                        }),*/
                    //new gviz.StrokeStyle({ maxZoom: 80 }),
                ],
                {
                    pixNb: 4
                })

    </script>

</body>

</html>