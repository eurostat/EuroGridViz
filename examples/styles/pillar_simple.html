<div id="map" style="height: 500px; width: 800px"></div>

<script src="../../dist/gridviz.js"></script>
<script>

    //define map with initial view
    const map = new gridviz.Map(document.getElementById('map'), { x: 4500000, y: 2900000, z: 1500, backgroundColor: '#F3FBFF' })

    //define multi resolution dataset
    const dataset = new gridviz.MultiResolutionDataset(
        [1000, 2000, 5000, 10000, 20000, 50000, 100000],
        resolution => new gridviz.TiledGrid(map, 'https://raw.githubusercontent.com/jgaffuri/tiledgrids/main/data/europe/population2/' + resolution + 'm/')
    )

    //define style
    const style = new gridviz.PillarStyle({
        heightCol: 'TOT_P_2021',
        height: (v, r, s, z) => 10 * r * gridviz.sExpRev(v / s.max, -2.5),
        simple: true,
        color: (v, r, s) => '#FF3D12aa',
        viewHeightFactor: 5,
        width: (v, r, s, z) => 0.3 * r,
        viewSX: -0.7,
        viewSY: -3,
        shadowDirection: (21 * Math.PI) / 180.0,
        shadowFactor: 0.5,
    })

    /*
                    .setLabelLayer(gviz_es.getEuronymeLabelLayer('EUR', 50))
                    .setBoundaryLayer(gviz_es.getEurostatBoundariesLayer())
                    .addBackgroundLayer({
                        url: 'https://gisco-services.ec.europa.eu/maps/tiles/GreyEarth/EPSG3035/',
                        resolutions: [
                            156543.03392804097, 78271.51696402048, 39135.75848201024, 19567.87924100512,
                            9783.93962050256, 4891.96981025128, 2445.98490512564,
                        ],
                        origin: [0, 6000000],
                        filterColor: (z) => '#ffffffd3',
                    })
    */

    //add layer to map
    map.layers = [new gridviz.GridLayer(dataset, [style], {
        minPixelsPerCell: 8,
        cellInfoHTML: (c) => '<b>' + c.TOT_P_2021 + '</b> inhabitant(s)',
    })]

</script>